<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Great Salt Lake South Arm Water Level</title>
  <script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
</head>
<body>
  <h2>Great Salt Lake, South Arm (USGS gage 10010000)</h2>
  <div id="plot" style="width:100%;height:600px;"></div>
  <script>
    fetch('data/gsl_data.json')
      .then(res => res.json())
      .then(data => {
        const dates = data.map(d => d.dateTime);
        const values = data.map(d => parseFloat(d.value));
        
        // Compute min and max, then add a buffer
        const minY = Math.min(...values);
        const maxY = Math.max(...values);
        const yBuffer = (maxY - minY) * 0.05; // 5% buffer
      
        const trace = {
      	x: dates,
      	y: values,
      	type: 'scatter',
      	mode: 'lines',
      	name: 'Gage height (ft)',
      	line: { color: 'black' }
        };
      
        const layout = {
      	title: 'GSL South Arm Water Level',
      	xaxis: { title: 'Date' },
      	yaxis: {
      	  title: 'Gage height (ft)',
      	  range: [minY - yBuffer, maxY + yBuffer]
      	},
      	shapes: [
      	  {
      		type: 'rect',
      		xref: 'paper',
      		x0: 0,
      		x1: 1,
      		yref: 'y',
      		y0: 4198,
      		y1: maxY + yBuffer,
      		fillcolor: 'rgba(173, 216, 230, 0.3)',
      		line: { width: 0 }
      	  },
      	  {
      		type: 'rect',
      		xref: 'paper',
      		x0: 0,
      		x1: 1,
      		yref: 'y',
      		y0: 4192,
      		y1: 4198,
      		fillcolor: 'rgba(200, 200, 200, 0.3)',
      		line: { width: 0 }
      	  },
      	  {
      		type: 'rect',
      		xref: 'paper',
      		x0: 0,
      		x1: 1,
      		yref: 'y',
      		y0: minY - yBuffer,
      		y1: 4192,
      		fillcolor: 'rgba(255, 160, 160, 0.3)',
      		line: { width: 0 }
      	  }
      	]
        };
      
        Plotly.newPlot('plot', [trace], layout);
      })
      .catch(err => {
        document.getElementById('plot').innerText = "Failed to load data.";
        console.error(err);
      });
  </script>
</body>
</html>

